libCURL.jl
==========

Thin Julia wrapper for libCURL

generate.jl is used to generate the following files:


lC_common_h.jl : enum consts (generated by clang.jl)

lC_curl_h.jl : function wrappers using the @c macro (generated by clang.jl)

lC_defines_h.jl : '#define' s (generated using the standard C preprocessor and regex)

lC_exports_j.jl : exports (generated by parsing lC_common_h.jl and lC_curl_h.jl)

lC_defines_h.jl and lC_exports_j.jl will also be generated from clang.jl once clang.jl supports the same.

libCURL.jl mostly includes the generated files and also defines a few variadic functions (clang.jl does not yet support varargs)

libCURL.jl should be used for low level 1:1 mapping of the libCURL API in Julia.

httpc.jl is the http client API wrapping libCURL for common use cases

mime_ext.jl is generated from /etc/mime.types and maps common file extensions to their MIME types


USAGE
=====

The exported APIs from module httpc are :

```
 get(url::String; querydict::Dict, timeout::Float64, cb::Function)

 post (url::String, data::String; querydict::Dict, content_type::String, timeout::Float64, cb::Function)

 put (url::String, data::String; querydict::Dict, content_type::String, timeout::Float64, cb::Function)

 post_file (url::String, filename::String; querydict::Dict, content_type::String, timeout::Float64, cb::Function)
 
 put_file (url::String, filename::String; querydict::Dict, content_type::String, timeout::Float64, cb::Function)
 
 head(url::String; querydict::Dict, timeout::Float64, cb::Function)
 
 delete(url::String; querydict::Dict, timeout::Float64, cb::Function)
 
 trace(url::String; querydict::Dict, timeout::Float64, cb::Function)
 
 options(url::String; querydict::Dict, timeout::Float64, cb::Function)
```

- Each method returns a Response object of the type:
```
    type Response
        body::String
        headers::Dict{ASCIIString, ASCIIString}
        http_code::Int
        total_time::Float64
    end
```

- ```querydict```, ```content_type```, ```timeout``` and ```cb``` are all optional parameters.

- The user can pass in a complete url in the ```url``` parameter or can pass in the query parameters
  in the ```querydict```.

  In the former case, the passed url is executed as is.

  In the latter case the complete URL if formed by concatenating the ```url``` field, a "?" and
  the escaped (key,value) pairs. 

- In all file upload cases, an attempt is made to set the ```content_type``` type automatically as
  derived from the file extension
  
- Default value for the timeout is 30.0 seconds

- Each of the functions takes in an optional callback. The signature of the callback should be
  ```customize_cb(curl)``` where ```curl``` is the libCURL handle. The callback can further customize
  the request by using libCURL easy* APIs directly


TODO
====
- Change the sleep in a loop to using fdwatcher when support for fdwatcher becomes available in mainline





